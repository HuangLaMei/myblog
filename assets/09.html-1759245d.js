import{_ as n,o as s,c as a,b as p}from"./app-d9f11ff8.js";const t="/myblog/assets/image-20231226231052708-cdade6c4.png",e="/myblog/assets/image-20231226231118476-f2e828cd.png",c="/myblog/assets/image-20231226231214995-ea892f28.png",o="/myblog/assets/image-20231226232028890-b317b60e.png",l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGgAAAA6CAIAAADTOIsKAAAD6UlEQVR4nO2aaUxTaRSGz61GJrSCQKxQfxBA7LhVExFNAA2SgBEM4pQgalxQrBoXFicMLnRcqsaYIS5BCGq0kwHNTMcFBFyCETe0calKXFAbFxRqhXIFZAjI/BjA1rrE03unXHOef+ee73598+TLPeltGZZljUajQqEA4lsQOTuAUCFxSEgcEhKHhMQhcUBch6li61QZwzDMTF3zx73X+n2rpo0PlHrKRoQkZOkeWi1o+EPJfETE3hp8DueAFWe5kZMYErHl1WRlsH2z7W52bFj6pUEJmw8W5KaFmfOVkekllu6uZLL6fA9H14eJwX/kUHdkDufBsqzBYOj8Rq5vGCYeteDgHbbxcAJAwl9N1s32smXuEJr95H1XXaedLoIZhRa7XTqeaZU+LsFqfZNdq9fTF6fbI0RzeVWcwh3YKvtms1eoendsrB/TVUsDh/vAqZpaAJtz1WrYMWfp+XG5leuCxLgUzgQpzi8i7vNNt6DE1CCr+unNyhrxjwGDbRY1lGcmZr6cX6Kb74/M4Fz4n6rm4l815QHJCyMlNpdvntDee/8of/aEScl7rr7u5D0G1/Asru1Bzrwkbf8VeVnhrradsSln9dcuFu2cKzm9InppwSt+c/AAbjj08Knh0E37C13SUJE0Ou9+6xd2MGvjAJRHWHQE58Dfiasvz5w+S+etKS5YLHexuv6P2fjQaHrXU3v5+nvCS5OZtyD8wJO45hvb42fsgdRjf/8yzs22Va9TyYelFL/trmur79eLZFIvfoLwBnKiWR5c0D9rBYCWO3UAYDh3xs0FRD6jI0ZKAcB0bPm0jCvy9P1RoqqKiq5bBgyZoJD1A/CJWRC/dtbqxIAmVZis3XhmZ9ZJP1VJpNvnP6x3gnvG6dVy+60ky0//1729dYx9N/aQqfvuRoM2Iy7Yz0Mskconztl8/HELd8+e/wuG3gDjoLcjSEgcEhKHhMQhIXFISBwSEoeExCEhcUhIHBISh4TEISFxSEgcEofFdT7Pj3F3Dd/1qIOLOMLB0d806/7MyCwNXHd9yZA+nOQRDI6Js5St/7lwYPqFlDH9OMojGBwR13JRk5bfmVy6JtT164u/N/Di2m5lr/zNNLNw45QBHOYRDNjh0FGdk7KpOmrLtnhvAKg9EMMwyaVcBuvtIE/c899Xq6+M3XgryZf5+uLvEpy45stlJ9iovJ+83zY0AAA0trRzmkoAODAcilS+niqrepHDYYQETtwP4RsqK1M/1G+K0qI1HCUSCDhxfaTy8VKrurbKg5s4woG+qyKhv0AgoROHhMQhIXFISBwSEoeExCEhcUhIHBISh4TEISFxSEgckn8BNAc//7FouUgAAAAASUVORK5CYII=",i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALcAAABLCAIAAAC9XIGqAAAEkElEQVR4nO3cf0yUdRwH8M+dTsoDTji7cWyFKOyyH4Q7QRtYQzZpgaEGgZ6r+YMuSwR/jTSFNC9bls4yrKGtriVa4s/gSNQmNKERwclYKZalI4+DOH7dTRg/+gMu4S73GQ/Praft/frvue/zPPf5473nuWd375NZLJaIiAgCuDf5fz0A/A8gJcBDSoCHlAAPKQEeUgK88aVk8FZBknJy3AfX+0UaByRp4ngObv46Z4s5fFvNK2ETxJoHpGgcKWkv3b658IGNFdmRk8SbB6RIcEqc3xs3FAxmmLfGThZzHpAigSnprdu3bq8tvXDnM1PEnQekSNCn1/7G/Oy3GhPefic1iIisnybJZBlmkQcDCRFyLbn1xaa8St3OupUhMtHnASkSkBLH5dIznQmfPB/UZbcTEXU4+8SeCqRF6KfXs4aQQMOI7dViDAMSJSAl98XtqKpaf3f7r7MbEo3iTQTSIyAlE9TaOeoR29aGANHGAUnC9zjAk+EXjcDCtQR4SAnwkBLgISXAQ0qAh5QADykBHlICPKQEeEgJ8JAS4CElwENKgIeUAA8NUOChAQo8NECBhwYo8NAABR4aoMBDAxR4aIACDw1Q4KEBCjw0QIGH73GAhwYo8HAtAR5SAjykBHhICfCQEuAhJcBDSoCHlAAPKQEeUgI8pAR4SAnwkBLgISXAQ0qAJzQl/bby3c8Gy2QyWXqRw32tpfpQ1sI54erA4Edj0nKLro3Ywf5lisxN/MEmz/OjgSwpFotlcKzsNR+lhk30jdSnRBOlHe8etdhTv+dJH3/dqvePFptPH8qZH0QhhmK7a7X3zyuX/nFy+zwFTV93vsvjHazHlqrkOmNtz5hnAy8QkpKaHTMVj6/4rL6z42iaR0r6Sl9VUuy+3waGt5tNi+S0pLDd4yz9N00pGp/ovOpujyW7OeMhenhzhWOsk4F3CGlaBMQYL2ctjlBSZ4PnokMVm/dhcnKoq9ClDn9EQ982WYmUI3e7Y3lv+ZpLUR9XbZutcDsDGsjSI+SO4/Jv1xJ3v+fPJ4X+5OibStuF7JnysNdKWzz376ndNUuuSj92W/BUIDovP+O0fvOm8eKMjFULfEe9XHvG9PPA9QL93KczDvzQMnh3AQ1kSRrXv9wweq/mv7TS5Jd5LjfO7d6hyz5frXe2Xbuwf2tmoj2g/rheQ0RoIEuV11LS33RizXOZP0YfLN8T79HqUk6bNXsaUVSMbqBu6ounKrr0L/gRGsiS5aWUtF3csmhZUZCx7MjLWp8Rr/e03vijS/FgqPr+oW1VyPRAqrS1Evm5dkEDWXq8kRLHT++mLjlA60tOvB7lP3qprcigzZr6VcuR1KFUWBt/aZMHq1VDq2ggS5SQlLRfrai+eYeInPXNRGT5rszfh+SaJ+IfUxOR7dTahTmV2o2HE+QN5eXDh0wJmxsRPIlIk7Qi9Y1lm5bO6DbMC+67UbY/tzjUULJgOEtoIEuVgCfh6jyt53l8154bWr2yO9JzNflzm+voDospZ3F0aIDCV619avmu07867/lGtw8nEq0uEfDoBqJCTxh4fwMGpUky0ZVDZwAAAABJRU5ErkJggg==",u="/myblog/assets/image-20231226233800203-a167867b.png",k="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALUAAABPCAIAAAAiOBOBAAADvUlEQVR4nO2aT0gUURzH39hqLazKhhG50q2ICiqrg0HQwaKI7BRGYGQeuqh0iRSiMjAQqksd+kMkXYo6CAVRZ7tEJJSEIRRJiHRQNDenMtsOG9M4b+Y7u29m1t2Z7+cgu29+M/t4v4+/39vZ0X7/mhQOfBid2LB+jdNREgXKlnoCpKihHwRBPwiCfhBEgfxIVKWUY3I5N2iKYQ5LQqwwH5P+Np6oSqW/jXuMAcgptFwK51gOBjPxMs/SIig/bJPhmkLbU+QYy3WMAHOk7QScPs52YtGRABBg/chxcS25kVNlHpFVCK7yOykSKW8K1F+E87KW1lpHSg7hxY/JoYd9ff3PXn2aSazdvr/lXFfLjhr13a5TyzCO5pIV11qSb7GRPzRScghlPzJjD040dU00nrlwe3Pl1Lt7vd1NY8tfP2pOaZo5DPcOy1rLLQNo4bq9UN5/5PU1KvS6KPqRnozt6rzedPrQpgpNiD0Nsfd1rc8Hp5uPJheHLU6Yj6sZ3P4DlK6oNReh7Edl/ZHuepHJzOvf5/8IEUuurhZvpqaFSNrHZ7Po+qVRbTIkOBT9WJh4ebWr99aL4a9zmexIRmx1Cs5qYf5rG+a9JPi+/yCKfgycPdk7cuDa/Z4tNRVlQoi3dw52fvZ1Yi4Et/8gZhT9GB5Krzt+qm3fxuzb2S/aT4dIS8EAJSSvJBXg/ofgXVRlP7Y1JK/cvXSxtnV3bWzm4+DAk5FqscI4aiyc7Qo6KSKn3LUTGa9dUxWFXAaB4h2Lw5f7+/YuPO3pONZ2/uZQXUdHY7kUg7caiapUkVd1KiWU64e2amf7jcftppHR2X8vjGV1/TVOHpRTkkuSLDF5XQQ0O6fKhycTMvy/v+7lf05uPa6/k8lHLafg0+XrZw3IpbVFAY3PJxMAnx8jCPpBEPSDIOgHQdAPgojN/ZDvbP1nWfnKgk2FFCGsHwRBPwiCfhAE/SAI+kEQnvyIx+N5jZOSw5Mfuq5ThXDjf3+Jx+O6rvt+WbIkKD7/YS4bcgkxj9CVkkbRD2Y9Iqg/P2YpGxZj2GXCgdf9aRZjhNvVkMH7HwTh6flkVovQ48kPo7NQlLDC/kIQ7C8E4XN/4XfakMH+QhBe/cA310mp49WP7E+45rYij5DSRd0PwwBZBcoRGrj/IAj6QRD0gyDoB0HQD4KgHwRBPwiCfhAE/SAI+kEQ9IMg6AdB0A+CoB8EQT8Ign4QBP0gCPpBEPSDIOgHQdAPgqAfBEE/CIJ+EAT9IAj6QRD0gyDoB0HQD4L4C1V4r0IXM+ofAAAAAElFTkSuQmCC",r="/myblog/assets/image-20231227000140795-7dc04635.png",d={},m=p('<h2 id="一-字节流" tabindex="-1"><a class="header-anchor" href="#一-字节流" aria-hidden="true">#</a> 一，字节流</h2><h3 id="_1-io流概述" tabindex="-1"><a class="header-anchor" href="#_1-io流概述" aria-hidden="true">#</a> 1，IO流概述</h3><p>前面我们已经学习过File类。但是我们知道File只能操作文件，但是不能操作文件中的内容。我们也学习了字符集，不同的字符集存字符数据的原理是不一样的。有了前面两个知识的基础，接下来我们再学习IO流，就可以对文件中的数据进行操作了。</p><p>IO流的作用：就是可以对文件或者网络中的数据进行读、写的操作。</p><ul><li>把数据从磁盘、网络中读取到程序中来，用到的是输入流。</li><li>把程序中的数据写入磁盘、网络中，用到的是输出流。</li><li>输入流（读数据）、输出流（写数据）</li></ul><p><img src="'+t+'" alt="image-20231226231052708"></p><p>IO流在Java中有很多种，不同的流来干不同的事情。Java把各种流用不同的类来表示，这些流的继承体系如下图所示：</p><ul><li>字节流：字节流又分为字节输入流、字节输出流</li><li>字符流：字符流由分为字符输入流、字符输出流</li></ul><p><img src="'+e+'" alt="image-20231226231118476"></p><h3 id="_2-fileinputstream读取一个字节" tabindex="-1"><a class="header-anchor" href="#_2-fileinputstream读取一个字节" aria-hidden="true">#</a> 2，FileInputStream读取一个字节</h3><p>InputStream表示字节流中的字节输入流。InputStream是抽象类，我们用的是它的子类，叫FileInputStream。</p><p>作用：以内存为基准，把磁盘文件中的数据以字节的形式读到内存中。</p><p><img src="'+c+`" alt="image-20231226231214995"></p><p>构造方法：</p><ul><li>public FileInputStream(File file) 创建字节输入流管道与源文件接通</li><li>public FileInputStream(String pathname) 创建字节输入流管道与源文件接通</li></ul><p>成员方法：</p><ul><li>public int read() 每次读取一个字节返回，如果发现没有数据可读，会返回-1</li><li>public int read(byte[] buffer) 每次用一个字节数组去读取数据，返回字节数组读取了多少个字节，如果发现没有数据可读，会返回-1</li></ul><p>使用FileInputStream读取文件中的字节数据，步骤如下</p><ul><li>第一步：创建FileInputStream文件字节输入流管道，与源文件接通。</li><li>第二步：调用read()方法开始读取文件的字节数据。</li><li>第三步：调用close()方法释放资源</li></ul><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>package com.Test;
import java.io.FileInputStream;
import java.io.IOException;

public class Test {
    public static void main(String[] args) throws IOException {
        // 第一步：创建FileInputStream文件字节输入流管道，与源文件接通。
        FileInputStream is = new FileInputStream(&quot;day01_code/src/d.txt&quot;);
        // 用于记住读取的字节
        int b;
        while((b=is.read()) != -1){
            System.out.println(b);//ASCII码中对应的数字
            System.out.println((char) b);
        }
        is.close();
    }
}
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+o+`" alt="image-20231226232028890"></p><h3 id="_3-fileinputstream读取多个字节" tabindex="-1"><a class="header-anchor" href="#_3-fileinputstream读取多个字节" aria-hidden="true">#</a> 3，FileInputStream读取多个字节</h3><p>FileInputStream调用read()方法，可以一次读取一个字节。但是这种读取方式效率太太太太慢了。 为了提高效率，我们可以使用另一个read(byte[] bytes)的重载方法，可以一次读取多个字节，至于一次读多少个字节，就在于你传递的数组有多大。</p><p>使用FileInputStream一次读取多个字节的步骤如下</p><ul><li>第一步：创建FileInputStream文件字节输入流管道，与源文件接通。</li><li>第二步：调用read(byte[] bytes)方法开始读取文件的字节数据。</li><li>第三步：调用close()方法释放资源</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">// 第一步：创建FileInputStream文件字节输入流管道，与源文件接通。</span>
        <span class="token class-name">FileInputStream</span> is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;day01_code/src/d.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 用于记住读取的字节</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> b<span class="token punctuation">;</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token punctuation">(</span>b<span class="token operator">=</span>is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// 第一次循环，读到了3个字节，就把这3个字节放到了字节数组中，读多少，就倒出多少</span>
            <span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 流使用完毕后，需要关闭，释放系统资源</span>
        is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+l+`" alt="image-20231226232941073"></p><p>每次读取过程如下：</p><ul><li>第一次调用read(bytes)读取了3个字节(分别是97,98,99)，并且往数组中存，此时返回值就是3</li><li>第二次调用read(bytes)读取了1个字节(分别是99),并且往数组中存，此时返回值是1</li><li>第三次调用read(bytes)文件中后面已经没有数据了，此时返回值为-1</li><li>也就是说，并不是每次读取的时候都把数组装满</li></ul><p>采用一次读取多个字节的方式，也是可能有乱码的。因为也有可能读取到半个汉字的情况。</p><h3 id="_4-fileinputstream读取全部字节" tabindex="-1"><a class="header-anchor" href="#_4-fileinputstream读取全部字节" aria-hidden="true">#</a> 4，FileInputStream读取全部字节</h3><p>前面我们到的读取方式，不管是一次读取一个字节，还是一次读取多个字节，都有可能有乱码。那么接下来我们介绍一种，不出现乱码的读取方式。我们可以一次性读取文件中的全部字节，然后把全部字节转换为一个字符串，就不会有乱码了。有两种方式：</p><ul><li>方式一：自已定义一个字节数组与被读取的文件大小一样大，然后使用该字节数组，一次读完文件的全部字节</li><li>方式二：Java官方为InputStream提供的方法，可以直接把文件的全部字节读取到一个字节数组中并返回</li></ul><p>方式一：自已定义一个字节数组与被读取的文件大小一样大，然后使用该字节数组，一次读完文件的全部字节</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">File</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">// 第一步：创建FileInputStream文件字节输入流管道，与源文件接通。</span>
        <span class="token class-name">FileInputStream</span> is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;day01_code/src/d.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;day01_code/src/d.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>file<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">long</span> size <span class="token operator">=</span> file<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 用于记住读取的字节</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span>size<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> len <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 流使用完毕后，需要关闭，释放系统资源</span>
        is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+i+`" alt="image-20231226233544149"></p><p>方式二：Java官方为InputStream提供的方法（Java9中），可以直接把文件的全部字节读取到一个字节数组中并返回</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">File</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">// 第一步：创建FileInputStream文件字节输入流管道，与源文件接通。</span>
        <span class="token class-name">FileInputStream</span> is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;day01_code/src/d.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// readAllBytes 是java9中的API</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">readAllBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 流使用完毕后，需要关闭，释放系统资源</span>
        is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>一次读取所有字节虽然可以解决乱码问题，但是文件不能过大，如果文件过大，可能导致内存溢出。</p><h3 id="_5-fileoutputstream写字节" tabindex="-1"><a class="header-anchor" href="#_5-fileoutputstream写字节" aria-hidden="true">#</a> 5，FileOutputStream写字节</h3><p>使用FIleInputStream读取文件中的字节数据，往文件中写数据需要用到OutputStream下面的一个子类FileOutputStream。写输入的流程如下图所示</p><p><img src="`+u+`" alt="image-20231226233800203"></p><p>FileOutputStream作用：以内存为基准，把内存中的数据以字节的形式写出到文件中去。</p><p>使用FileOutputStream往文件中写数据的步骤如下</p><ul><li>第一步：创建FileOutputStream文件字节输出流管道，与目标文件接通。</li><li>第二步：调用wirte()方法往文件中写数据</li><li>第三步：调用close()方法释放资源</li></ul><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">File</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileOutputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>charset<span class="token punctuation">.</span></span><span class="token class-name">StandardCharsets</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token comment">// 创建os字节输出流，与目标文件连通  默认创建的，会覆盖之前的数据</span>
        <span class="token comment">//FileOutputStream os = new FileOutputStream(&quot;day01_code/src/d.txt&quot;);</span>
        <span class="token comment">// 追加数据 后面加true</span>
        <span class="token class-name">FileOutputStream</span> os <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;day01_code/src/d.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 调用write往文件中写数据</span>
        os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token number">97</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//a</span>
        <span class="token comment">//os.write(&quot;啊&quot;); // 一次只能写一个字节</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token string">&quot;床前明月光&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 换行符</span>
        os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&quot;\\r\\n&quot;</span><span class="token punctuation">.</span><span class="token function">getBytes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//前面3表示位置是bytes的第三个，后面的3表示3个字符也就是写一个汉字</span>
        <span class="token comment">// 流使用完毕后，需要关闭，释放系统资源</span>
        os<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+k+`" alt="image-20231226234737091"></p><h3 id="_6-字节流复制文件" tabindex="-1"><a class="header-anchor" href="#_6-字节流复制文件" aria-hidden="true">#</a> 6，字节流复制文件</h3><p>前面已经把字节输入流和字节输出流都学习完了。现在我们就可以用这两种流配合起来使用，做一个文件复制的综合案例。比如：我们要复制一张图片，从磁盘<code>E:/Users/test/logo.webp</code>的一个位置，复制到<code>E:/Users</code>位置。思路如下：</p><ol><li>需要创建一个FileInputStream流与源文件接通，创建FileOutputStream与目标文件接通</li><li>然后创建一个数组，使用FileInputStream每次读取一个字节数组的数据，存如数组中</li><li>然后再使用FileOutputStream把字节数组中的有效元素，写入到目标文件中</li></ol><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">File</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileOutputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">IOException</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>charset<span class="token punctuation">.</span></span><span class="token class-name">StandardCharsets</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
        <span class="token class-name">FileInputStream</span> is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;E:/Users/test/logo.webp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">FileOutputStream</span> os <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;E:/Users/logo.webp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 创建一个字节数组，负责转移字节数据</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 1024个字节，就是1KB</span>
        <span class="token keyword">int</span> len<span class="token punctuation">;</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
        os<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;复制完成&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+r+`" alt="image-20231227000140795"></p><h2 id="二-io流资源释放" tabindex="-1"><a class="header-anchor" href="#二-io流资源释放" aria-hidden="true">#</a> 二，IO流资源释放</h2><p>流使用完之后一定要释放资源。但是我们之前的代码并不是很专业。 如果代码中出现异常了，程序中终止了，释放资源的代码就没有机会执行，如下：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>

        <span class="token comment">// 创建字节输入流，与源文件连通</span>
        <span class="token class-name">FileInputStream</span> is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;D:/resource/a.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 创建字节输出流，，与源文件连通</span>
        <span class="token class-name">FileOutputStream</span> os <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;E:/resource/a.png&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 这里已经出现异常了，异常下面的代码是不会执行的，也就是说</span>
        <span class="token comment">// 关闭流的那两行代码是不会执行的。</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 创建一个字节数组，负责转移字节数据</span>
        <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 1024个字节，就是1KB</span>

        <span class="token keyword">int</span> len<span class="token punctuation">;</span>  <span class="token comment">// 记住每一次读取多少个字节</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        os<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;复制完成~~！&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>对于上面的问题，在JDK7以前，和JDK7以后分别给出了不同的处理方案。</p><h3 id="_1-jdk7以前的资源释放" tabindex="-1"><a class="header-anchor" href="#_1-jdk7以前的资源释放" aria-hidden="true">#</a> 1，JDK7以前的资源释放</h3><p>在JDK7版本以前，我们可以使用try...catch...finally语句来处理。格式如下</p><p>try...catch...finally格式如下：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">try</span><span class="token punctuation">{</span>
    <span class="token comment">//有可能产生异常的代码</span>
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>异常类 e<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//处理异常的代码</span>
<span class="token punctuation">}</span><span class="token keyword">finally</span><span class="token punctuation">{</span>
    <span class="token comment">//释放资源的代码</span>
    <span class="token comment">//finally里面的代码有一个特点，不管异常是否发生，finally里面的代码都会执行。</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">InputStream</span> is <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token class-name">OutputStream</span> os <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span><span class="token punctuation">{</span>
            <span class="token comment">// 这里已经出现异常了，异常下面的代码是不会执行的，也就是说</span>
            <span class="token comment">// 关闭流的那两行代码是不会执行的。</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">/</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;E:/Users/test/logo.webp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           os <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;E:/Users/logo.webp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token comment">// 创建一个字节数组，负责转移字节数据</span>
           <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 1024个字节，就是1KB</span>
           <span class="token keyword">int</span> len<span class="token punctuation">;</span>
           <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
               os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
           <span class="token punctuation">}</span>
           <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;复制完成&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
           e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token keyword">finally</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;finally&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token keyword">try</span> <span class="token punctuation">{</span>
              <span class="token keyword">if</span> <span class="token punctuation">(</span>is<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                  is<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
              <span class="token punctuation">}</span>
          <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
              e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>os<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    os<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-jdk7以后的资源释放" tabindex="-1"><a class="header-anchor" href="#_2-jdk7以后的资源释放" aria-hidden="true">#</a> 2，JDK7以后的资源释放</h3><p>try...catch...finally处理异常，并释放资源代码比较繁琐。Java在JDK7版本为我们提供了一种简化的释放资源的操作，<strong>并不需要写关闭流的代码，它会自动释放资源</strong>。代码写起来也想当简单。</p><p>格式如下：</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">try</span><span class="token punctuation">(</span>资源对象<span class="token number">1</span><span class="token punctuation">;</span> 资源对象<span class="token number">2</span><span class="token punctuation">;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    使用资源的代码
<span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>异常类 e<span class="token punctuation">)</span><span class="token punctuation">{</span>
    处理异常的代码
<span class="token punctuation">}</span>

<span class="token comment">//注意：注意到没有，这里没有释放资源的代码。它会自动释放资源</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span></span><span class="token class-name">Test</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileInputStream</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">java<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span><span class="token class-name">FileOutputStream</span></span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Test</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 并不需要写关闭流的代码，它会自动释放资源</span>
        <span class="token keyword">try</span><span class="token punctuation">(</span>
            <span class="token class-name">FileInputStream</span> is <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileInputStream</span><span class="token punctuation">(</span><span class="token string">&quot;E:/Users/test/logo.webp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">FileOutputStream</span> os <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">FileOutputStream</span><span class="token punctuation">(</span><span class="token string">&quot;E:/Users/logo.webp&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">// 这里已经出现异常了，异常下面的代码是不会执行的，也就是说</span>
            <span class="token comment">// 关闭流的那两行代码是不会执行的。</span>
            <span class="token comment">//System.out.println(1/0);</span>
            <span class="token comment">// 创建一个字节数组，负责转移字节数据</span>
            <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> buffer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token number">1024</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">// 1024个字节，就是1KB</span>
            <span class="token keyword">int</span> len<span class="token punctuation">;</span>
            <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token punctuation">(</span>len <span class="token operator">=</span> is<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">!=</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                os<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>buffer<span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">,</span>len<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;复制完成&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
           e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,66),v=[m];function b(y,w){return s(),a("div",null,v)}const f=n(d,[["render",b],["__file","09.html.vue"]]);export{f as default};
